# 文件管理
## 场景描述
文件上传，查看历史，下载，更新记录
## api
|接口名称|地址|请求方式|请求参数|返回参数|备注|
|----------|----------|------|----------|----------|----------|
|文件上传|upload|post|参考jquery的文件上传参数|{filedId: 'xxxx'}||
|文件下载|download|get|{fieldId:'XXX'}||Content-Type设置为application/pdf，用于在线预览|
|文件删除|deleteFile|post|{documentId: 'XXX'}|||
|文件更新|update|post|见附录的文件列表|{fileId:'new1112', fileVersion: 'v111112'}||
|查看历史|viewHistory|post|{ documentId: documentId }|见附录文件版本列表||

## 数据库表定义
### 文件版本表
|fileId|serialNo|fileVersion|fileSize|uploadTime|
|------|--------|-----------|---------|---------|
|主键|与文件管理表一一对应|文件版本|文件大小|上传时间|

### 文件管理表
|serialNo|docNessary|needUploadDocName|docName|remark|updateTime|ownerId|
|--------|----------|-----------------|-------|------|----------|-------|
|主键|是否必须|需上传资料名称|附件名称|备注|修改时间|所有者（用于查询上传用户和上传部门)|

## 备注

## 附录
+ 文件列表

```
{
	  "fileId":"925.索引条",
	  "fileName":"XXX合同",
	  "fileSize":63,
    "uploadTime":"2016-09-29T14:50:26.000Z",
    "documentId":"mkd011112",
    "docmentName":"合同",
    "docmentRemark":"aa",
    "docNessary":"Y",
    "fileVersion": 123123,
    "docmentGroupId":"sfs",
    "docmentGroupName":"sfs",
    "bizModelCode":"project",
    "bizModelID":"111",
}
```

+ 文件版本列表

```
{
	  "fileId":"925.索引条",
	  "fileVersion":11,
	  "fileSize":11,
	  "uploadTime":/date/
	  
}
```




